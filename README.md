![banner](./dolores-banner.png)

*ç»™æˆ‘ä»¬ä¸€ä¸ªstaré¼“åŠ±æˆ‘ä»¬æŒç»­åšä¸‹åŽ»ã€‚ðŸ˜„ðŸ˜„ðŸ˜„*

	ä¹‹å‰QQç¾¤è®¾ç½®æœ‰ç‚¹é—®é¢˜ï¼Œæ¬¢è¿Žå¤§å®¶è¿›ç¾¤è®¨è®º ç¾¤å·:641256202

# Dolores
Doloresè¯•å›¾æˆä¸ºä¸€å¥—å®Œæ•´çš„ä¼ä¸šé€šä¿¡è§£å†³æ–¹æ¡ˆï¼Œä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šæ²Ÿé€šå·¥å…·ï¼ˆä»¥ä¸‹ç®€ç§°ä¼ä¸šIMï¼‰è‡³å°‘éœ€è¦æ”¯æŒä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼šIMæ¶ˆæ¯æœåŠ¡ã€ç»„ç»‡æž¶æž„ç®¡ç†ã€å·¥ä½œæµé›†æˆ

## IMæ¶ˆæ¯æœåŠ¡
å®žæ—¶æ¶ˆæ¯è¿™ä¸€å—æœ‰å¾ˆå¤šå¼€æºçš„è§£å†³æ–¹æ¡ˆæ¯”å¦‚[XMPP](https://xmpp.org)ï¼Œä½†æ˜¯ä¼ä¸šé€šä¿¡å¯¹IMè¿™å—çš„å¯é æ€§è¦æ±‚å¾ˆé«˜ï¼Œæ‰€ä»¥ç›®å‰æˆ‘ä»¬æ‰“ç®—ä½¿ç”¨æ¯”è¾ƒæˆç†Ÿçš„äº‘æœåŠ¡ï¼ŒåŽæœŸå¦‚æžœæ—¶é—´æ¯”è¾ƒå……è£•ï¼Œè€ƒè™‘å¼€å‘è‡ªå·±çš„IMæœåŠ¡å™¨ã€‚åœ¨å¯¹æ¯”äº†å¸‚åœºä¸Šæ•°åå®¶IMäº‘æœåŠ¡åŽ‚å•†ä»¥åŽï¼Œæˆ‘ä»¬å†³å®šé€‰æ‹©[çŽ¯ä¿¡](http://www.easemob.com)æ¥ä¸ºDoloresæä¾›æ¶ˆæ¯æœåŠ¡ã€‚
## ç»„ç»‡æž¶æž„
ä¼ä¸šé€šè®¯å½•å¯ä»¥è¯´æ˜¯ä¼ä¸šæ²Ÿé€šä¸­æœ€é‡çš„ä¸šåŠ¡ä¹‹ä¸€ï¼Œèƒ½å¤Ÿæä¾›å‘˜å·¥å„ç§æœåŠ¡çš„è®¤è¯ï¼ŒèŽ·å–å‘˜å·¥çš„è”ç³»æ–¹å¼ç­‰ç­‰ã€‚
### ç»„ç»‡æž¶æž„-Server
æœåŠ¡ç«¯ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹åŠŸèƒ½ï¼š

 1. æ”¯æŒç®¡ç†äººå‘˜ï¼ˆä¾‹å¦‚HRï¼‰å¯¹éƒ¨é—¨å’Œå‘˜å·¥è¿›è¡Œå¢žåˆ æ”¹æŸ¥
 2. æ”¯æŒéƒ¨é—¨å’Œå‘˜å·¥è‡ªå®šä¹‰æŽ’åºï¼Œè‡ªå®šä¹‰å…ƒä¿¡æ¯å­˜å‚¨
 3. æƒé™ç®¡ç†
 4. å‘˜å·¥é€šè®¯å½•è§†å›¾ ï¼ˆå‘˜å·¥æ ¹æ®è‡ªå·±çš„æƒé™ç”Ÿæˆé€šè®¯å½•ï¼‰
 5. é€šè®¯å½•å¢žé‡æ›´æ–° ï¼ˆé‰´äºŽç§»åŠ¨ç«¯ç‰¹æ®Šçš„ç½‘ç»œçŽ¯å¢ƒå’Œè®¾å¤‡ï¼Œé€šè®¯å½•åº”è¯¥æ”¯æŒå·®é‡æ›´æ–°ï¼‰
 6. é›†æˆ IM ç”¨æˆ·ç³»ç»Ÿ

åœ¨è¿™é‡Œæˆ‘ä»¬ä¸»è¦è®¨è®ºä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š
#### æƒé™ç®¡ç†
éšç€ä¼ä¸šé€æ¸çš„å‘å±•ï¼Œå›¢é˜Ÿå£®å¤§ä¸ºäº†æ›´æœ‰æ•ˆçš„æ²Ÿé€šï¼Œä»¥åŠä¿æŠ¤å…¬å¸å†…éƒ¨çš„ä¸€äº›å•†ä¸šä¿¡æ¯ä¸è¢«æ³„æ¼ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ºé€šè®¯å½•æ·»åŠ æƒé™ç®¡ç†ã€‚

##### åŸºäºŽ[Role-based access controlï¼ˆRBACï¼‰](https://en.wikipedia.org/wiki/Role-based_access_control)çš„æƒé™ç®¡ç†æ¨¡åž‹

ä¸ºäº†ä»‹ç»æ­¤æƒé™ç®¡ç†æ¨¡åž‹ï¼Œæˆ‘ä»¬å…ˆè§£é‡Šä¸€ä¸‹åŸºæœ¬æ¦‚å¿µ

- è§’è‰²ï¼šé€šå¸¸æ˜¯æŒ‡ä¼ä¸šä¸­æŸä¸€ä¸ªå·¥ä½œå²—ä½ï¼Œè¿™ä¸ªå²—ä½å…·æœ‰ç‰¹å®šçš„æƒåˆ©å’ŒèŒè´£ã€‚è¢«èµ‹äºˆæ­¤è§’è‰²çš„å‘˜å·¥ï¼Œå°†èŽ·å¾—è¿™ç§æƒåˆ©ä¸ŽèŒè´£
- æƒé™ï¼šè¢«èµ‹äºˆè®¿é—®å®žä½“çš„æƒåˆ©ã€‚åœ¨æœ¬é¡¹ç›®ä¸­æ˜¯æŒ‡è®¿é—®éƒ¨é—¨å’Œè®¿é—®æŸä¸€ä¸ªæˆ–è€…æŸä¸€ç±»å‘˜å·¥çš„æƒåˆ©
- ç”¨æˆ·-è§’è‰²åˆ†é…(User-Role Assignment URA)ï¼šä¸ºæŸä¸ªç”¨æˆ·æŒ‡å®šä¸€ä¸ªæˆ–è€…å¤šä¸ªè§’è‰²ï¼Œæ­¤å‘˜å·¥å°†èŽ·å¾—è¿™äº›è§’è‰²æ‰€å…·æœ‰æƒåˆ©çš„é›†åˆ
- è§’è‰²-æƒé™åˆ†é…(Role-Permission Assignment RPA)ï¼šå°†æƒé™åˆ†é…ç»™è§’è‰²ï¼Œä¸€ä¸ªè§’è‰²å¯ä»¥åŒ…å«å¤šä¸ªæƒåˆ©ã€‚åœ¨æœ¬é¡¹ç›®ä¸­æ˜¯æŒ‡å¤šä¸ªè®¿é—®éƒ¨é—¨å’Œè®¿é—®å‘˜å·¥çš„æƒé™

åœ¨ç”¨æˆ·å’Œæƒé™ä¹‹é—´å¼•å…¥è§’è‰²ä¸­ä»‹ï¼Œå°†ç”¨æˆ·ä¸Žæƒé™çš„ç›´æŽ¥å…³ç³»å¼±åŒ–ä¸ºé—´æŽ¥å…³ç³»ã€‚

``` text
|Ë‰Ë‰Ë‰Ë‰Ë‰Ë‰|           |Ë‰Ë‰Ë‰Ë‰Ë‰Ë‰Ë‰|          |Ë‰Ë‰Ë‰Ë‰Ë‰Ë‰Ë‰Ë‰Ë‰Ë‰Ë‰Ë‰Ë‰|  
| User |---URA---> |  Role |<---RPA---| Permission  |
|______|           |_______|          |_____________|
```

ä»¥è§’è‰²ä¸ºä¸­ä»‹ï¼Œé¦–å…ˆåˆ›å»ºè®¿é—®æ¯ä¸ªéƒ¨é—¨å’Œå‘˜å·¥çš„è®¿é—®æƒé™ï¼Œç„¶åŽåˆ›å»ºä¸åŒçš„è§’è‰²ï¼Œæ ¹æ®è¿™äº›è§’è‰²çš„èŒè´£ä¸åŒåˆ†é…ä¸åŒçš„æƒé™ï¼Œå»ºç«‹`è§’è‰²-æƒé™`çš„å…³ç³»ä»¥åŽï¼Œä¸åŒçš„è§’è‰²å°†ä¼šæœ‰ä¸åŒçš„æƒé™ã€‚æ ¹æ®å‘˜å·¥ä¸åŒçš„å²—ä½ï¼Œå°†å¯¹åº”çš„è§’è‰²åˆ†é…ç»™ä»–ä»¬ï¼Œå»ºç«‹`ç”¨æˆ·-è§’è‰²`å…³ç³»ï¼Œè¿™å°±æ˜¯`RBAC`çš„ä¸»è¦æ€æƒ³ã€‚

ä¸€ä¸ªå‘˜å·¥å¯ä»¥ç”¨æˆ·å¤šä¸ªè§’è‰²ï¼Œä¸€ä¸ªè§’è‰²å¯ä»¥ç”¨äºŽå¤šä¸ªè®¿é—®æƒé™ã€‚`RBAC` æžå¤§çš„ç®€åŒ–äº†å‘˜å·¥çš„æŽˆæƒç®¡ç†ã€‚

ç”±äºŽä¼ä¸šçš„éƒ¨é—¨å’Œå‘˜å·¥æ•°é‡å¾ˆå¤šï¼Œåœ¨åˆ›å»ºæƒé™æ—¶ç®¡ç†å‘˜ä¸å¯èƒ½åŽ»è®¾ç½®æ¯ä¸€ä¸ªæƒé™å¯ä»¥è®¿é—®çš„æ¯ä¸€ä¸ªéƒ¨é—¨å’Œæ¯ä¸€ä¸ªå‘˜å·¥ã€‚æ‰€ä»¥æœ¬é¡¹ç›®å°†åŠŸèƒ½å’ŒæŒ‡è´£ç±»ä¼¼çš„éƒ¨é—¨å’Œå‘˜å·¥çœ‹ä½œæ˜¯åŒä¸€ç±»åž‹ï¼Œåœ¨åˆ›å»ºéƒ¨é—¨å’Œå‘˜å·¥çš„æ—¶å€™ä¸ºæ¯ä¸€ä¸ªéƒ¨é—¨å’Œå‘˜å·¥åˆ†é…å›ºæœ‰å±žæ€§`type`ï¼Œç®¡ç†å‘˜åœ¨è®¾ç½®æƒé™è§„åˆ™çš„æ—¶å€™åªéœ€è¦æŒ‡å®šå¯è®¿é—®çš„éƒ¨é—¨ç±»åž‹å’Œå‘˜å·¥å³å¯ã€‚

#### å¢žé‡æ›´æ–°
é‰´äºŽç§»åŠ¨ç»ˆç«¯è®¡ç®—èµ„æºæœ‰é™ï¼Œå¦‚ç½‘ç»œï¼Œå­˜å‚¨ï¼Œç”µé‡ç­‰ï¼Œæ‰€ä»¥é€šè®¯å½•çš„æ›´æ–°æŠ€æœ¯åº”è¯¥ä¿è¯å°½é‡å°‘çš„èµ„æºã€‚å¦å¤–ç”±äºŽé€šè®¯å½•çš„ç‰¹æ®Šæ€§ï¼Œé€šè®¯å½•çš„å˜åŒ–éœ€è¦èƒ½å®žæ—¶é€šçŸ¥åˆ°å—å½±å“çš„åœ¨çº¿å‘˜å·¥ã€‚

##### åŸºäºŽç‰ˆæœ¬å·ä¸Žå˜æ›´æ—¥å¿—çš„å¢žé‡æ›´æ–°æ¨¡åž‹
å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡ç™»é™†ç³»ç»Ÿä»¥åŽï¼Œæˆ‘ä»¬æ ¹æ®å½“å‰ç™»å½•è§’è‰²ç”Ÿæˆå¯¹åº”çš„é€šè®¯å½•è§†å›¾ï¼Œå¹¶ä»¥å½“å‰æ—¶é—´æˆ³ä½œä¸ºç‰ˆæœ¬å·ï¼Œè¿”å›žç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯åŽç»­é€šè¿‡æ­¤ç‰ˆæœ¬å·å¢žé‡æ›´æ–°é€šè®¯å½•ã€‚

###### ç‰ˆæœ¬å·
ç‰ˆæœ¬å·æœ‰ä¸¤ç§ï¼šä¸€æ˜¯å®¢æˆ·ç«¯å½“å‰é€šè®¯å½•ç‰ˆæœ¬ `c-version`,  äºŒæ˜¯æœåŠ¡ç«¯é€šè®¯å½•æ¯ä¸€æ¬¡å˜åŒ–æ—¶çš„ç‰ˆæœ¬å·`s-version`

###### å˜æ›´æ—¥å¿—
åœ¨ç®¡ç†å‘˜ä¿®æ”¹æƒé™è§„åˆ™ï¼Œæˆ–è€…ä¿®æ”¹æŸä¸ªå²—ä½çš„è®¿é—®è§„åˆ™æ—¶ä¼šå½±å“å¤§é¢ç§¯å‘˜å·¥çš„é€šè®¯å½•è§†å›¾ï¼Œæ­¤æ—¶å¦‚æžœç”¨å¢žé‡æ›´æ–°ä¼šå¯¼è‡´æœåŠ¡å™¨æµé‡å¼‚å¸¸ï¼Œå› æ­¤åœ¨è¿™2ä¸­æƒ…å†µä¼šæ¸…ç©ºåŽŸæ¥çš„å˜æ›´æ—¥å¿—å¹¶ä¸”è¦æ±‚å®¢æˆ·ç«¯è¿›è¡Œä¸€æ¬¡å…¨é‡æ›´æ–°ã€‚

å¦‚æžœç®¡ç†å‘˜æ–°å¢žäº†å‘˜å·¥ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®è¢«ä¿®æ”¹çš„å‘˜å·¥æˆ–è€…éƒ¨é—¨typeï¼Œ åæŽ¨å‡ºæ‰€æœ‰å—å½±å“çš„å‘˜å·¥ï¼Œç„¶åŽç”Ÿæˆä¸€æ¡å˜æ›´æ—¥å¿—ï¼Œ ä¾‹å¦‚ï¼š
``` json
	{
       "content" : [
        {
          "cn" : "Lucy.Liu",
          "id" : "b4vlfg91scgi1dcju8v0",
          "title" : "å¸‚åœºè¿è¥è´Ÿè´£äºº",
          "email" : [
            "lucy.liu@dolores.store"
          ],
          "priority" : "101111",
          "name" : "åˆ˜å°é£ž",
          "telephoneNumber" : "18888888888"
        }
      ],
      "createTimestamp" : "20170614063303Z",
      "category" : "member",
      "action" : "add"
    }
```
å®¢æˆ·ç«¯åœ¨è¯·æ±‚å¢žé‡æ›´æ–°çš„æ—¶å€™ï¼Œé€šè¿‡å½“å‰ç™»é™†IDä¸Žç‰ˆæœ¬å·ï¼Œå¯æŸ¥æ‰¾å‡ºæ‰€æœ‰ä¸Žè‡ªå·±ç›¸å…³çš„å˜æ›´æ—¥å¿—ï¼Œç„¶åŽåœ¨å®¢æˆ·ç«¯æ•°æ®åº“ä¸­åº”ç”¨è¿™äº›å˜æ›´ï¼Œå³å¯å®ŒæˆåŒæ­¥ã€‚

### ç»„ç»‡æž¶æž„-Client
ç”±äºŽçŽ°åœ¨å‘˜å·¥åŠžå…¬è®¾å¤‡çš„å¤šæ ·æ€§ï¼Œå®¢æˆ·ç«¯è¦æ ¹æ®è‡ªå·±å…¬å¸çš„æƒ…å†µï¼Œè¦†ç›–çš„è¶³å¤Ÿå®Œæ•´ï¼Œå¸¸è§çš„å¹³å°æœ‰ `iOS` `Android`  `windows` `mac` `linux` , å¯¹äºŽåŽä¸‰ä¸ªå¹³å°å¯ä»¥ç”¨ `Web APP` æ¥è¦†ç›–ï¼Œ`iOS&Android` ç”¨åŽŸç”Ÿçš„appæ¥æå‡ç”¨æˆ·ä½“éªŒã€‚

å®¢æˆ·ç«¯Appä¸»è¦åŒ…æ‹¬ä»¥ä¸‹åŠŸèƒ½ï¼š

 1. ä¼šè¯åˆ—è¡¨
 2. ä¼˜ç§€çš„èŠå¤©ç•Œé¢ï¼ŒåŽ†å²è®°å½•
 3. ç»„ç»‡æœºæž„å…¨é‡ï¼å¢žé‡æ›´æ–°
 4. å‘˜å·¥ä¸ªäººèµ„æ–™å±•ç¤º

#### å®¢æˆ·ç«¯æ•°æ®åº“è®¾è®¡
##### IMæ•°æ®åº“è®¾è®¡
å½“å‰ç‰ˆæœ¬ä½¿ç”¨[çŽ¯ä¿¡SDK](http://www.easemob.com)ï¼Œæš‚ä¸è®¨è®ºï¼ˆTODOï¼‰
##### ç»„ç»‡æž¶æž„æ•°æ®åº“è®¾è®¡

**è¡¨è®¾è®¡**

å®¢æˆ·ç«¯ç»„ç»‡æž¶æž„è¾ƒæœåŠ¡ç«¯ç®€å•ï¼Œä¸å…³è”ç”¨æˆ·Roleï¼Œå®¢æˆ·ç«¯æœ¬åœ°å­˜å‚¨Staffï¼ˆå‘˜å·¥ï¼‰å’ŒDepartmentï¼ˆéƒ¨é—¨ï¼‰ä¿¡æ¯ï¼š

- ä¸€ä¸ªéƒ¨é—¨å¯ä»¥åŒ…å«ç›¸å…³å­éƒ¨é—¨å’Œéƒ¨é—¨å‘˜å·¥ã€‚è¯¥éƒ¨é—¨å‘˜å·¥å’Œéƒ¨é—¨åœ¨è§†å›¾ä¸Šå¤„äºŽåŒçº§å…³ç³»ã€‚
- å‘˜å·¥éš¶å±žäºŽéƒ¨é—¨ï¼ŒåŒä¸€å‘˜å·¥å¯ä»¥å­˜åœ¨äºŽå¤šä¸ªéƒ¨é—¨ã€‚
- å‘˜å·¥è§’è‰²ç”¨titleæ¥è¡¨ç¤ºã€‚

ç”¨æˆ·åœ¨ç™»å½•å®¢æˆ·ç«¯æˆåŠŸåŽï¼Œä¼šæ ¹æ®è¯¥ç”¨æˆ·ä¿¡æ¯åˆ›å»ºç”¨æˆ·å¯¹åº”çš„æ•°æ®åº“æ–‡ä»¶ï¼Œç”¨æˆ·è¡¨ï¼ˆUserï¼‰ä¿å­˜ç”¨æˆ·ç›¸å…³ä¿¡æ¯ï¼Œå…³è”è¯¥ç”¨æˆ·staffä¿¡æ¯ã€‚

å®¢æˆ·ç«¯ç»„ç»‡æž¶æž„åŒæœåŠ¡ç«¯é€»è¾‘ã€‚

## å·¥ä½œæµé›†æˆ
ï¼ˆTODOï¼‰

# å¦‚ä½•ä½¿ç”¨Dolores

æœ¬é¡¹ç›®çŽ°åœ¨å·²ç»å®Œæˆäº†ç¬¬ä¸€ä¸ªæµ‹è¯•ç‰ˆæœ¬ï¼Œæœ¬å°èŠ‚å°†æŒ‡å¯¼æ‚¨å¦‚ä½•å®‰è£…ä½¿ç”¨ã€‚

### åŽç«¯æ•°æ®åº“
é‰´äºŽé€šè®¯å½•å¯¹æ•°æ®åº“æ“ä½œçš„ç‰¹ç‚¹å¤šåº¦å°‘å†™ï¼Œä»¥åŠéƒ¨é—¨ä¹‹é—´çš„æ ‘çŠ¶å…³ç³»ï¼Œæˆ‘ä»¬é€‰æ‹©`LDAP`åè®®æ¥å­˜å–æ•°æ®ã€‚

æˆ‘ä»¬æœ‰ç‹¬ç«‹çš„repoæ¥å¸®åŠ©æ‚¨å®Œæˆæ•°æ®åº“çš„å®‰è£…ä¸Žåˆå§‹åŒ–ã€‚[è¯·ç§»æ­¥è¿™é‡Œ](https://github.com/DoloresTeam/dolores-ldap-init)

### ç»„ç»‡æž¶æž„ç®¡ç†
Dolores åˆå§‹ç‰ˆæœ¬ä½¿ç”¨Golangå®žçŽ°ï¼Œå¤§å®¶æ—¢å¯ä»¥ä¸‹è½½å„ä¸ªå¹³å°çš„å¯æ‰§è¡ŒåŒ…ï¼Œä¹Ÿå¯ä»¥å®‰è£…Goè¯­è¨€çš„å¼€å‘çŽ¯å¢ƒè‡ªå·±ç¼–è¯‘ã€‚  

æˆ‘ä»¬æœ‰ç‹¬ç«‹çš„repoæ¥å¸®åŠ©æ‚¨ï¼Œè¿è¡ŒåŽç«¯æœåŠ¡ã€‚[è¯·ç§»æ­¥è¿™é‡Œ](https://github.com/DoloresTeam/dolores-server)

### å®¢æˆ·ç«¯
æˆ‘ä»¬çŽ°åœ¨æœ‰æä¾›ä¸€ä¸ªiOSç‰ˆçš„Demoã€‚[è¯·ç§»æ­¥è¿™é‡Œ]()

### Done
å¦‚æžœæ‚¨é¡ºåˆ©çš„å®Œæˆä»¥ä¸Šä¸‰æ­¥ï¼Œè®¿é—® http://localhost:3280 (ç«¯å£å·æ ¹æ®è‡ªå·±çš„é…ç½®ï¼Œå¯èƒ½ä¼šæœ‰å·®å¼‚)ï¼Œä½¿ç”¨ `username: admin, password: dolores` ç™»é™†åŽç«¯ç®¡ç†é¡µé¢ï¼Œæ·»åŠ æƒé™è§„åˆ™ï¼Œæ·»åŠ è§’è‰²ï¼Œæ·»åŠ å‘˜å·¥ã€éƒ¨é—¨ï¼Œç„¶åŽä½¿ç”¨iOSå®¢æˆ·ç«¯ç™»é™†ï¼Œå°±å¯ä»¥æ„‰å¿«çš„å¼€å§‹èŠå¤©å•¦ï½ž

# äº¤æµè®¨è®º

	1.github issue (æŽ¨è)
	2.qq ç¾¤ï¼š641256202
	
# è´Ÿè½½å‡è¡¡
ï¼ˆTODOï¼‰
# å¤šæœºå®¹ç¾
ï¼ˆTODOï¼‰

# LICENSE
	 Apache License
	 Version 2.0, January 2004
	 http://www.apache.org/licenses/	

Copyright 2017 - 2018 DoloresTeam aoxianglele#icloud.com
